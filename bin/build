#!/usr/bin/env bash

# Build script for py2neo

# ascertain project directory
PY2NEO=`pwd`/`dirname $0`/..

# clear any existing builds
rm -rf $PY2NEO/dist

# check version number
VERSION=`cat VERSION | awk '{print $1}'`
echo "*** Building version $VERSION ***"

# set python path
export PYTHONPATH=$PY2NEO/src

# package software
python $PY2NEO/setup.py sdist

# package documentation
cd $PY2NEO/doc
make clean
make html
cd $PY2NEO/doc/_build/html
zip -r $PY2NEO/dist/py2neo-doc-$VERSION.zip *
